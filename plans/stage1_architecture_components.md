# Ключевые компоненты архитектуры приложения - Этап 1

## 1. Общая архитектурная структура

На основе требований и рекомендаций из архитектурного плана, приложение будет построено по слоистой архитектуре с тремя основными уровнями:
- UI уровень (компоненты и экраны)
- Бизнес-логика уровень (сервисы, вычисления)
- Уровень данных (хранилище данных, модели)

## 2. Ключевые компоненты UI уровня

### 2.1. Экраны приложения:
- CalendarScreen - основной экран с календарем
- StatisticsScreen - экран статистики и аналитики
- SettingsScreen - экран настроек
- AddRecordScreen - экран добавления/редактирования записей
- NotificationSettingsScreen - экран настроек уведомлений

### 2.2. Переиспользуемые компоненты:
- CalendarComponent - календарь на основе react-native-calendars
- CycleDayMarker - компонент для маркировки дней цикла
- StatisticsChart - компонент для отображения графиков
- ThemeToggle - компонент переключения темы
- NotificationToggle - компонент настройки уведомлений

## 3. Ключевые компоненты бизнес-логики уровня

### 3.1. Сервисы:
- CycleTrackingService - сервис для отслеживания менструального цикла
  - методы для добавления, редактирования и удаления записей
  - методы для расчета продолжительности цикла
  - методы для прогнозирования будущих дней
- NotificationService - сервис управления уведомлениями
  - методы для планирования уведомлений
  - методы для настройки параметров уведомлений
- StatisticsService - сервис для статистики и аналитики
  - методы для вычисления статистических показателей
  - методы для генерации отчетов
- ExportService - сервис для экспорта данных
  - методы для подготовки данных для экспорта
  - методы для генерации файлов экспорта

### 3.2. Хуки:
- useCycleTracking - хук для управления данными цикла
- useNotifications - хук для управления уведомлениями
- useTheme - хук для управления темой
- useStatistics - хук для получения статистических данных

## 4. Ключевые компоненты уровня данных

### 4.1. Модели данных:
- CycleRecordModel - модель записи о дне цикла
  - содержит дату, тип дня (менструация, овуляция и т.д.), симптомы, заметки
- CycleStatsModel - модель статистических данных
  - содержит среднюю продолжительность цикла, прогнозы и другие метрики
- SettingsModel - модель настроек приложения
  - содержит настройки уведомлений, темы и другие предпочтения

### 4.2. Хранилища данных:
- CycleRepository - репозиторий для работы с записями цикла
  - методы для сохранения, получения и удаления записей
  - использует SQLite для хранения
- SettingsRepository - репозиторий для работы с настройками
  - методы для сохранения и получения настроек
  - использует AsyncStorage для хранения

## 5. Сторонние зависимости и их роль

- react-native-calendars: предоставляет компонент календаря
- react-native-push-notification: обеспечивает функциональность уведомлений
- nativewind: обеспечивает стилизацию компонентов
- @react-navigation/native: обеспечивает навигацию между экранами
- react-native-sqlite-storage: обеспечивает локальное хранение данных
- @react-native-async-storage/async-storage: обеспечивает хранение настроек
- mobx: обеспечивает управление состоянием приложения